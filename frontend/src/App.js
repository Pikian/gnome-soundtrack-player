import React, { useState, useEffect } from 'react';































































































































































































































































import { BrowserRouter as Router, Routes, Route } from 'react-router-dom';































































































































































































































































import TrackList from './components/TrackList';































































































































































































































































import TrackPlayer from './components/TrackPlayer';































































































































































































































































import Login from './components/Login';































































































































































































































































import Error404 from './components/Error404'; // Add this import































































































































































































































































import TrackManager from './components/TrackManager'; // Add this import

import './App.css';































































































































































































































































































































































































































































































import Navigation from './components/Navigation'; // Add this import

function App() {

  const [currentTrack, setCurrentTrack] = useState(null);

  const [isPlaying, setIsPlaying] = useState(false);

  const [isAuthenticated, setIsAuthenticated] = useState(false);



  const handlePlayTrack = (track) => {

    setCurrentTrack(track);

    setIsPlaying(true);

  };



  useEffect(() => {

    const auth = localStorage.getItem('isAuthenticated');

    if (auth === 'true') {

      setIsAuthenticated(true);

    }

  }, []);



  if (!isAuthenticated) {

    return <Login onLogin={() => setIsAuthenticated(true)} />;

  }



  return (

    <Router>

      <div className="App">

        <Navigation /> {/* Add this line */}

        <div className="content">

          <Routes>

            <Route 

              path="/" 

              element={

                <TrackList 

                  onPlayTrack={handlePlayTrack} 

                  currentTrack={currentTrack}

                  isPlaying={isPlaying}

                />

              } 

            />

            <Route path="/manage" element={<TrackManager />} />

            <Route path="*" element={<Error404 />} />

          </Routes>

        </div>

        {currentTrack && (
          <div className="fixed-player">
            <div className="track-info">
              <h3>{currentTrack.title || currentTrack.name}</h3>
              <span className="filename">{currentTrack.filename}</span>
            </div>
            <TrackPlayer 
              filename={currentTrack.filename}
              onPlayStateChange={setIsPlaying}
              key={currentTrack.filename}
            />
          </div>
        )}

      </div>

    </Router>

  );

}



export default App;



